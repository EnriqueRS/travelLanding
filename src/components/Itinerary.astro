---
import config from "../data/travel.config.json"

const steps = config.itinerary || []

// Mapeo de nombres de ciudad a archivos de imagen
const cityImageMap: Record<string, string> = config.cityImages || {}
---

<section id="itinerario" class="container mx-auto px-4 py-12">
  <h2 class="text-2xl sm:text-3xl font-semibold mb-6">
    Itinerario paso a paso
  </h2>
  <ol class="grid md:grid-cols-2 gap-6 counter-reset-[step]">
    {
      steps.map((s, idx) => (
        <li
          class="relative rounded-xl border border-white/10 p-5 backdrop-blur-xl shadow-lg hover:border-rose-500/30 transition-colors group"
          style={
            cityImageMap[s.city]
              ? `background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(15, 23, 42, 0.85) 100%), url('${cityImageMap[s.city]}'); background-size: cover; background-position: center;`
              : "background: rgba(15, 23, 42, 0.6);"
          }
        >
          <div class="absolute -top-3 -left-3 h-8 w-8 rounded-full bg-rose-600 text-white flex items-center justify-center text-sm font-semibold shadow">
            {idx + 1}
          </div>
          <div class="relative z-10">
            <div class="flex items-baseline justify-between gap-4 mb-3">
              <h3 class="text-xl font-medium">{s.city}</h3>
              <span class="text-sm opacity-80">{s.days}</span>
            </div>
            {s.special && (
              <p class="mt-2 text-sm">
                <span class="font-medium">Actividad especial:</span> {s.special}
              </p>
            )}
            <div class="mt-3">
              <p class="text-sm font-medium">Imprescindibles:</p>
              <ul class="mt-1 list-disc list-inside space-y-1 text-sm">
                {s.must.map((m) => (
                  <li>{m}</li>
                ))}
              </ul>
            </div>
            {s.transfer && <p class="mt-3 text-sm opacity-80">{s.transfer}</p>}
          </div>
        </li>
      ))
    }
  </ol>
</section>
